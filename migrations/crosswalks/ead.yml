# Maps the cross walk between EAD and ASpace objects.
# Borrows some ideas from Qubit
#   http://code.google.com/p/qubit-toolkit/source/browse/trunk/apps/qubit/modules/object/config/import/ead.yml
source:
  format: "xml"
  schema: "http://www.loc.gov/ead/ead.xsd"
entities:
  resource: 
    xpath: ["ead"]
    properties:
      id_0: 
        xpath: ["descendant::unitid"]

      title: 
        xpath: ["descendant::unittitle"]
        
      subjects: 
        xpath: ["descendant::subject"]
        # temporary hack:
        procedure: "|value| value = nil unless value.include?('/'); value"
        
      extents:
        xpath: ["descendant::extent"]
        default: "5 or so"
        procedure: "|value| {'portion' => 'whole', 'number' => value, 'extent_type' => 'reels'}"
        
  archival_object: 
    xpath: ["//dsc", "//c", "//c01", "//c02", "//c03", "//c04", "//c05", "//c06", "//c07", "//c08", "//c09", "//c10", "//c11", "//c12"]
    properties:
      title: 
        xpath: ["child::*/child::unittitle"]
        default: "Archival Objects"

      ref_id: 
        xpath: ["@id"]
        default: "1"
        
      parent: 
        xpath: ["parent::c"]

      resource: 
        xpath: ["ancestor::ead"]
        
      subjects: 
        xpath: ["child::subject"]
      
  subject:
    xpath: ["subject"]
    properties:
      terms: 
        xpath: ["self"]
        procedure: "|value| {'term' => value, 'term_type' => 'Cultural context'}"
        
  agent_person:
    xpath: ["persname"]
    properties:
      agent_type:
        default: "agent_person"
      
      names:
        xpath: ["self"]
        procedure: "|value| {'rules' => 'local', 'primary_name' => value, 'sort_name' => value, 'direct_order' => 'standard'}"

  agent_corporate_entity:
    xpath: ["corpname"]
    properties:
      agent_type:
        default: "agent_corporate_entity"    
  
      names:
        xpath: ["self"]
        procedure: "|value| {'rules' => 'local', 'primary_name' => value}"
  
      



