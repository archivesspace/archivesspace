<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Repository
  
    &mdash; Documentation by YARD 0.9.36
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Repository";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (R)</a> &raquo;
    
    
    <span class="title">Repository</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Repository
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Struct</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Struct</li>
          
            <li class="next">Repository</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>backend/app/model/repository.rb<span class="defines">,<br />
  public/app/models/repository.rb</span>
</dd>
  </dl>
  
</div>



  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="AllRepos-classvariable" class="">@@AllRepos =
          
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span><span class='rbrace token'>}</span>
</pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#code-instance_method" title="#code (instance method)">#<strong>code</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute code.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#display_name-instance_method" title="#display_name (instance method)">#<strong>display_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute display_name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent-instance_method" title="#parent (instance method)">#<strong>parent</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute parent.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent_url-instance_method" title="#parent_url (instance method)">#<strong>parent_url</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute parent_url.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#uri-instance_method" title="#uri (instance method)">#<strong>uri</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute uri.</p>
</div></span>
  
</li>

    
  </ul>





  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#badge_list-class_method" title="badge_list (class method)">.<strong>badge_list</strong>(repo_code)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>determine which badges to display.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exists%3F-class_method" title="exists? (class method)">.<strong>exists?</strong>(id)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_json-class_method" title="from_json (class method)">.<strong>from_json</strong>(json)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_repos-class_method" title="get_repos (class method)">.<strong>get_repos</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#GLOBAL-class_method" title="GLOBAL (class method)">.<strong>GLOBAL</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#global_repo_id-class_method" title="global_repo_id (class method)">.<strong>global_repo_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sequel_to_jsonmodel-class_method" title="sequel_to_jsonmodel (class method)">.<strong>sequel_to_jsonmodel</strong>(objs, opts = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_repos-class_method" title="set_repos (class method)">.<strong>set_repos</strong>(repos)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#after_create-instance_method" title="#after_create (instance method)">#<strong>after_create</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assimilate-instance_method" title="#assimilate (instance method)">#<strong>assimilate</strong>(other_repository)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#before_create-instance_method" title="#before_create (instance method)">#<strong>before_create</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#display_string-instance_method" title="#display_string (instance method)">#<strong>display_string</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(code, name, uri, display_name, parent, parent_url = &#39;&#39;)  &#x21d2; Repository </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Repository.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reindex_classification_records-instance_method" title="#reindex_classification_records (instance method)">#<strong>reindex_classification_records</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reindex_repository_records-instance_method" title="#reindex_repository_records (instance method)">#<strong>reindex_repository_records</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_from_json-instance_method" title="#update_from_json (instance method)">#<strong>update_from_json</strong>(json, opts = {}, apply_nested_records = true)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_position_only-instance_method" title="#update_position_only (instance method)">#<strong>update_position_only</strong>(target_position)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validate-instance_method" title="#validate (instance method)">#<strong>validate</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(code, name, uri, display_name, parent, parent_url = &#39;&#39;)  &#x21d2; <tt><span class='object_link'><a href="" title="Repository (class)">Repository</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of Repository.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31
32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'public/app/models/repository.rb', line 27</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='rubyid_code identifier id'>code</span><span class='comma token'>,</span> <span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_uri identifier id'>uri</span><span class='comma token'>,</span> <span class='rubyid_display_name identifier id'>display_name</span><span class='comma token'>,</span> <span class='rubyid_parent identifier id'>parent</span><span class='comma token'>,</span> <span class='rubyid_parent_url identifier id'>parent_url</span> <span class='assign token'>=</span> <span class='string val'>&#39;&#39;</span><span class='rparen token'>)</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_code identifier id'>code</span> <span class='assign token'>=</span> <span class='rubyid_code identifier id'>code</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='assign token'>=</span> <span class='rubyid_name identifier id'>name</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_uri identifier id'>uri</span> <span class='assign token'>=</span> <span class='rubyid_uri identifier id'>uri</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_display_name identifier id'>display_name</span> <span class='assign token'>=</span> <span class='rubyid_display_name identifier id'>display_name</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent identifier id'>parent</span> <span class='assign token'>=</span> <span class='rubyid_parent identifier id'>parent</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_parent_url identifier id'>parent_url</span> <span class='assign token'>=</span> <span class='rubyid_parent_url identifier id'>parent_url</span> <span class='rubyid_if if_mod kw'>if</span> <span class='notop op'>!</span><span class='rubyid_parent_url identifier id'>parent_url</span><span class='dot token'>.</span><span class='rubyid_blank? fid id'>blank?</span> <span class='andop op'>&amp;&amp;</span> <span class='notop op'>!</span><span class='rubyid_parent_url identifier id'>parent_url</span><span class='dot token'>.</span><span class='rubyid_end_with? fid id'>end_with?</span><span class='lparen token'>(</span><span class='string val'>&quot;url\.unspecified&quot;</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="code=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="code-instance_method">
  
    #<strong>code</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute code</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the current value of code</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1
2
3</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'public/app/models/repository.rb', line 1</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_code identifier id'>code</span>
  <span class='rubyid_@code ivar id'>@code</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="display_name=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="display_name-instance_method">
  
    #<strong>display_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute display_name</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the current value of display_name</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1
2
3</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'public/app/models/repository.rb', line 1</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_display_name identifier id'>display_name</span>
  <span class='rubyid_@display_name ivar id'>@display_name</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="name=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    #<strong>name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute name</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the current value of name</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1
2
3</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'public/app/models/repository.rb', line 1</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_name identifier id'>name</span>
  <span class='rubyid_@name ivar id'>@name</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="parent=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="parent-instance_method">
  
    #<strong>parent</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute parent</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the current value of parent</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1
2
3</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'public/app/models/repository.rb', line 1</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_parent identifier id'>parent</span>
  <span class='rubyid_@parent ivar id'>@parent</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="parent_url=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="parent_url-instance_method">
  
    #<strong>parent_url</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute parent_url</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the current value of parent_url</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1
2
3</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'public/app/models/repository.rb', line 1</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_parent_url identifier id'>parent_url</span>
  <span class='rubyid_@parent_url ivar id'>@parent_url</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="uri=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="uri-instance_method">
  
    #<strong>uri</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute uri</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the current value of uri</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1
2
3</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'public/app/models/repository.rb', line 1</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_uri identifier id'>uri</span>
  <span class='rubyid_@uri ivar id'>@uri</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="badge_list-class_method">
  
    .<strong>badge_list</strong>(repo_code)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>determine which badges to display</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18
19
20
21
22
23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'public/app/models/repository.rb', line 16</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_Repository constant id'>Repository</span><span class='dot token'>.</span><span class='rubyid_badge_list identifier id'>badge_list</span><span class='lparen token'>(</span><span class='rubyid_repo_code identifier id'>repo_code</span><span class='rparen token'>)</span>
  <span class='rubyid_list identifier id'>list</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_i identifier id'>i</span><span class='lparen token'>(</span><span class='rubyid_resource identifier id'>resource</span> <span class='rubyid_record identifier id'>record</span> <span class='rubyid_digital_object identifier id'>digital_object</span> <span class='rubyid_accession identifier id'>accession</span> <span class='rubyid_subject identifier id'>subject</span> <span class='rubyid_agent identifier id'>agent</span> <span class='rubyid_classification identifier id'>classification</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_sym identifier id'>sym</span><span class='bitor op'>|</span>
    <span class='rubyid_badge identifier id'>badge</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{sym}_badge&quot;</span><span class='dot token'>.</span><span class='rubyid_to_sym identifier id'>to_sym</span>
    <span class='rubyid_unless unless kw'>unless</span> <span class='rubyid_AppConfig constant id'>AppConfig</span><span class='lbrack token'>[</span><span class='symbol val'>:pui_repos</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_dig identifier id'>dig</span><span class='lparen token'>(</span><span class='rubyid_repo_code identifier id'>repo_code</span><span class='comma token'>,</span> <span class='symbol val'>:hide</span><span class='comma token'>,</span> <span class='rubyid_badge identifier id'>badge</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span> <span class='integer val'>? </span><span class='rubyid_AppConfig constant id'>AppConfig</span><span class='lbrack token'>[</span><span class='symbol val'>:pui_hide</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='rubyid_badge identifier id'>badge</span><span class='rbrack token'>]</span> <span class='colon op'>:</span> <span class='rubyid_AppConfig constant id'>AppConfig</span><span class='lbrack token'>[</span><span class='symbol val'>:pui_repos</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='rubyid_repo_code identifier id'>repo_code</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:hide</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='rubyid_badge identifier id'>badge</span><span class='rbrack token'>]</span>
      <span class='rubyid_list identifier id'>list</span><span class='dot token'>.</span><span class='rubyid_push identifier id'>push</span><span class='lparen token'>(</span><span class='rubyid_sym identifier id'>sym</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_list identifier id'>list</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exists?-class_method">
  
    .<strong>exists?</strong>(id)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 30</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_exists? fid id'>exists?</span><span class='lparen token'>(</span><span class='rubyid_id identifier id'>id</span><span class='rparen token'>)</span>
  <span class='rubyid_not not kw'>not</span> <span class='rubyid_Repository constant id'>Repository</span><span class='lbrack token'>[</span><span class='rubyid_id identifier id'>id</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="from_json-class_method">
  
    .<strong>from_json</strong>(json)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'public/app/models/repository.rb', line 36</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_from_json identifier id'>from_json</span><span class='lparen token'>(</span><span class='rubyid_json identifier id'>json</span><span class='rparen token'>)</span>
  <span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_json identifier id'>json</span><span class='lbrack token'>[</span><span class='string val'>&#39;repo_code&#39;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_json identifier id'>json</span><span class='lbrack token'>[</span><span class='string val'>&#39;name&#39;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_json identifier id'>json</span><span class='lbrack token'>[</span><span class='string val'>&#39;uri&#39;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_json identifier id'>json</span><span class='lbrack token'>[</span><span class='string val'>&#39;display_string&#39;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_json identifier id'>json</span><span class='lbrack token'>[</span><span class='string val'>&#39;parent_institution_name&#39;</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_json identifier id'>json</span><span class='lbrack token'>[</span><span class='string val'>&#39;url&#39;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_repos-class_method">
  
    .<strong>get_repos</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


4
5
6
7
8
9</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'public/app/models/repository.rb', line 4</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_Repository constant id'>Repository</span><span class='dot token'>.</span><span class='rubyid_get_repos identifier id'>get_repos</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@@AllRepos ivar id'>@@AllRepos</span><span class='dot token'>.</span><span class='rubyid_blank? fid id'>blank?</span>
    <span class='rubyid_@@AllRepos ivar id'>@@AllRepos</span> <span class='assign token'>=</span> <span class='rubyid_ArchivesSpaceClient constant id'>ArchivesSpaceClient</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='dot token'>.</span><span class='rubyid_list_repositories identifier id'>list_repositories</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_@@AllRepos ivar id'>@@AllRepos</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GLOBAL-class_method">
  
    .<strong>GLOBAL</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 40</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_GLOBAL constant id'>GLOBAL</span>
  <span class='comment val'># The repository code indicating that this group is global to all repositories</span>
  <span class='rubyid_ASConstants constant id'>ASConstants</span><span class='colon2 op'>::</span><span class='rubyid_Repository constant id'>Repository</span><span class='dot token'>.</span><span class='rubyid_GLOBAL constant id'>GLOBAL</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="global_repo_id-class_method">
  
    .<strong>global_repo_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 35</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_global_repo_id identifier id'>global_repo_id</span>
  <span class='rubyid_self self kw'>self</span><span class='lbrack token'>[</span><span class='symbol val'>:repo_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_Repository constant id'>Repository</span><span class='dot token'>.</span><span class='rubyid_GLOBAL constant id'>GLOBAL</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_id identifier id'>id</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sequel_to_jsonmodel-class_method">
  
    .<strong>sequel_to_jsonmodel</strong>(objs, opts = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


156
157
158
159
160
161
162
163
164
165
166
167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 156</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_sequel_to_jsonmodel identifier id'>sequel_to_jsonmodel</span><span class='lparen token'>(</span><span class='rubyid_objs identifier id'>objs</span><span class='comma token'>,</span> <span class='rubyid_opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_jsons identifier id'>jsons</span> <span class='assign token'>=</span> <span class='rubyid_super super kw'>super</span>

  <span class='rubyid_jsons identifier id'>jsons</span><span class='dot token'>.</span><span class='rubyid_zip identifier id'>zip</span><span class='lparen token'>(</span><span class='rubyid_objs identifier id'>objs</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_json identifier id'>json</span><span class='comma token'>,</span> <span class='rubyid_obj identifier id'>obj</span><span class='bitor op'>|</span>
    <span class='rubyid_json identifier id'>json</span><span class='lbrack token'>[</span><span class='string val'>&#39;display_string&#39;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_obj identifier id'>obj</span><span class='dot token'>.</span><span class='rubyid_display_string identifier id'>display_string</span>
    <span class='rubyid_if if kw'>if</span> <span class='lparen token'>(</span><span class='rubyid_agent_id identifier id'>agent_id</span> <span class='assign token'>=</span> <span class='rubyid_obj identifier id'>obj</span><span class='dot token'>.</span><span class='rubyid_agent_representation_id identifier id'>agent_representation_id</span><span class='rparen token'>)</span>
      <span class='rubyid_json identifier id'>json</span><span class='lbrack token'>[</span><span class='string val'>&quot;agent_representation&quot;</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
        <span class='string val'>&quot;ref&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_JSONModel constant id'>JSONModel</span><span class='lparen token'>(</span><span class='symbol val'>:agent_corporate_entity</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_uri_for identifier id'>uri_for</span><span class='lparen token'>(</span><span class='rubyid_agent_id identifier id'>agent_id</span><span class='rparen token'>)</span>
      <span class='rbrace token'>}</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_jsons identifier id'>jsons</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_repos-class_method">
  
    .<strong>set_repos</strong>(repos)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'public/app/models/repository.rb', line 11</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_Repository constant id'>Repository</span><span class='dot token'>.</span><span class='rubyid_set_repos identifier id'>set_repos</span><span class='lparen token'>(</span><span class='rubyid_repos identifier id'>repos</span><span class='rparen token'>)</span>
  <span class='rubyid_@@AllRepos ivar id'>@@AllRepos</span> <span class='assign token'>=</span> <span class='rubyid_repos identifier id'>repos</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="after_create-instance_method">
  
    #<strong>after_create</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 50</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_after_create identifier id'>after_create</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_repo_code identifier id'>repo_code</span> <span class='eq op'>==</span> <span class='rubyid_Repository constant id'>Repository</span><span class='dot token'>.</span><span class='rubyid_GLOBAL constant id'>GLOBAL</span>
    <span class='comment val'># No need for standard groups on this one.</span>
    <span class='rubyid_return return kw'>return</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_standard_groups identifier id'>standard_groups</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='lbrace token'>{</span>
                       <span class='symbol val'>:group_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;repository-managers&quot;</span><span class='comma token'>,</span>
                       <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_I18n constant id'>I18n</span><span class='dot token'>.</span><span class='rubyid_t identifier id'>t</span><span class='lparen token'>(</span><span class='string val'>&quot;group.default_group_names.repository_managers&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:repo_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_repo_code identifier id'>repo_code</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                       <span class='symbol val'>:grants_permissions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='string val'>&quot;manage_repository&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_location_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_subject_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_agent_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_accession_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_resource_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_digital_object_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_event_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;delete_event_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_container_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_container_profile_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_location_profile_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;view_repository&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;delete_archival_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;suppress_archival_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_subject_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_agent_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;view_agent_contact_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_vocabulary_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_rde_templates&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_container_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_container_profile_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_location_profile_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;import_records&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;cancel_job&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_assessment_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;delete_assessment_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_assessment_attributes&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_enumeration_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_enumeration_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;show_full_agents&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_custom_report_templates&quot;</span><span class='rbrack token'>]</span>
                     <span class='rbrace token'>}</span><span class='comma token'>,</span>
                     <span class='lbrace token'>{</span>
                       <span class='symbol val'>:group_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;repository-archivists&quot;</span><span class='comma token'>,</span>
                       <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_I18n constant id'>I18n</span><span class='dot token'>.</span><span class='rubyid_t identifier id'>t</span><span class='lparen token'>(</span><span class='string val'>&quot;group.default_group_names.repository_archivists&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:repo_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_repo_code identifier id'>repo_code</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                       <span class='symbol val'>:grants_permissions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='string val'>&quot;update_subject_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_agent_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_accession_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_resource_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_digital_object_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_event_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_container_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_container_profile_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_location_profile_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;view_repository&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_subject_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_agent_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;view_agent_contact_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_vocabulary_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_container_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_container_profile_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_location_profile_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;import_records&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_assessment_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;delete_assessment_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;create_job&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;cancel_job&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_enumeration_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_enumeration_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;show_full_agents&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_custom_report_templates&quot;</span><span class='rbrack token'>]</span>
                     <span class='rbrace token'>}</span><span class='comma token'>,</span>
                     <span class='lbrace token'>{</span>
                       <span class='symbol val'>:group_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;repository-project-managers&quot;</span><span class='comma token'>,</span>
                       <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_I18n constant id'>I18n</span><span class='dot token'>.</span><span class='rubyid_t identifier id'>t</span><span class='lparen token'>(</span><span class='string val'>&quot;group.default_group_names.project_managers&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:repo_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_repo_code identifier id'>repo_code</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                       <span class='symbol val'>:grants_permissions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='string val'>&quot;view_repository&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_accession_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_resource_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_digital_object_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_event_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;delete_event_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_subject_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_agent_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_container_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_container_profile_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_location_profile_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;delete_archival_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;suppress_archival_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_subject_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_agent_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;view_agent_contact_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_vocabulary_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_container_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_container_profile_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_location_profile_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;import_records&quot;</span><span class='comma token'>,</span> <span class='string val'>&#39;merge_agents_and_subjects&#39;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_assessment_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;delete_assessment_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_enumeration_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_enumeration_record&quot;</span><span class='rbrack token'>]</span>
                     <span class='rbrace token'>}</span><span class='comma token'>,</span>
                     <span class='lbrace token'>{</span>
                       <span class='symbol val'>:group_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;repository-advanced-data-entry&quot;</span><span class='comma token'>,</span>
                       <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_I18n constant id'>I18n</span><span class='dot token'>.</span><span class='rubyid_t identifier id'>t</span><span class='lparen token'>(</span><span class='string val'>&quot;group.default_group_names.advanced_data_entry&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:repo_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_repo_code identifier id'>repo_code</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                       <span class='symbol val'>:grants_permissions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='string val'>&quot;view_repository&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_accession_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_resource_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_digital_object_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_event_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_subject_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_agent_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_container_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_container_profile_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_location_profile_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_subject_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_agent_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_vocabulary_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_container_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;manage_container_profile_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_location_profile_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;import_records&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_assessment_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;delete_assessment_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_enumeration_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;manage_enumeration_record&quot;</span><span class='rbrack token'>]</span>
                     <span class='rbrace token'>}</span><span class='comma token'>,</span>
                     <span class='lbrace token'>{</span>
                       <span class='symbol val'>:group_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;repository-basic-data-entry&quot;</span><span class='comma token'>,</span>
                       <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_I18n constant id'>I18n</span><span class='dot token'>.</span><span class='rubyid_t identifier id'>t</span><span class='lparen token'>(</span><span class='string val'>&quot;group.default_group_names.basic_data_entry&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:repo_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_repo_code identifier id'>repo_code</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                       <span class='symbol val'>:grants_permissions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='string val'>&quot;view_repository&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_accession_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;update_resource_record&quot;</span><span class='comma token'>,</span>
                                               <span class='string val'>&quot;update_digital_object_record&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;create_job&quot;</span><span class='rbrack token'>]</span>
                     <span class='rbrace token'>}</span><span class='comma token'>,</span>
                     <span class='lbrace token'>{</span>
                       <span class='symbol val'>:group_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;repository-viewers&quot;</span><span class='comma token'>,</span>
                       <span class='symbol val'>:description</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_I18n constant id'>I18n</span><span class='dot token'>.</span><span class='rubyid_t identifier id'>t</span><span class='lparen token'>(</span><span class='string val'>&quot;group.default_group_names.repository_viewers&quot;</span><span class='comma token'>,</span> <span class='symbol val'>:repo_code</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_repo_code identifier id'>repo_code</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                       <span class='symbol val'>:grants_permissions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrack token'>[</span><span class='string val'>&quot;view_repository&quot;</span><span class='rbrack token'>]</span>
                     <span class='rbrace token'>}</span><span class='rbrack token'>]</span>

  <span class='rubyid_RequestContext constant id'>RequestContext</span><span class='dot token'>.</span><span class='rubyid_open identifier id'>open</span><span class='lparen token'>(</span><span class='symbol val'>:repo_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_id identifier id'>id</span><span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span>
    <span class='rubyid_standard_groups identifier id'>standard_groups</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_group_data identifier id'>group_data</span><span class='bitor op'>|</span>
      <span class='rubyid_Group constant id'>Group</span><span class='dot token'>.</span><span class='rubyid_create_from_json identifier id'>create_from_json</span><span class='lparen token'>(</span><span class='rubyid_JSONModel constant id'>JSONModel</span><span class='lparen token'>(</span><span class='symbol val'>:group</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_from_hash identifier id'>from_hash</span><span class='lparen token'>(</span><span class='rubyid_group_data identifier id'>group_data</span><span class='rparen token'>)</span><span class='comma token'>,</span>
                             <span class='symbol val'>:repo_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_id identifier id'>id</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_Notifications constant id'>Notifications</span><span class='dot token'>.</span><span class='rubyid_notify identifier id'>notify</span><span class='lparen token'>(</span><span class='string val'>&quot;REPOSITORY_CHANGED&quot;</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assimilate-instance_method">
  
    #<strong>assimilate</strong>(other_repository)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149
150
151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 147</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_assimilate identifier id'>assimilate</span><span class='lparen token'>(</span><span class='rubyid_other_repository identifier id'>other_repository</span><span class='rparen token'>)</span>
  <span class='rubyid_ASModel constant id'>ASModel</span><span class='dot token'>.</span><span class='rubyid_all_models identifier id'>all_models</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_model identifier id'>model</span><span class='bitor op'>|</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_model identifier id'>model</span><span class='dot token'>.</span><span class='rubyid_model_scope identifier id'>model_scope</span><span class='lparen token'>(</span><span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='symbol val'>:repository</span>
      <span class='rubyid_model identifier id'>model</span><span class='dot token'>.</span><span class='rubyid_transfer_all identifier id'>transfer_all</span><span class='lparen token'>(</span><span class='rubyid_other_repository identifier id'>other_repository</span><span class='comma token'>,</span> <span class='rubyid_self self kw'>self</span><span class='rparen token'>)</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='lbrack token'>[</span> <span class='rubyid_Preference constant id'>Preference</span> <span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span><span class='lparen token'>(</span><span class='rubyid_model identifier id'>model</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="before_create-instance_method">
  
    #<strong>before_create</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 45</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_before_create identifier id'>before_create</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_position identifier id'>position</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_max identifier id'>max</span><span class='lparen token'>(</span><span class='symbol val'>:position</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='integer val'>-1</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='integer val'>1</span>
  <span class='rubyid_super super kw'>super</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete-instance_method">
  
    #<strong>delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136
137
138
139
140
141
142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 134</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_delete identifier id'>delete</span>
  <span class='comment val'># this is very expensive...probably need to come up with something</span>
  <span class='comment val'># better...</span>
  <span class='lbrack token'>[</span> <span class='rubyid_Classification constant id'>Classification</span><span class='comma token'>,</span> <span class='rubyid_Event constant id'>Event</span><span class='comma token'>,</span> <span class='rubyid_Resource constant id'>Resource</span><span class='comma token'>,</span> <span class='rubyid_DigitalObject constant id'>DigitalObject</span><span class='comma token'>,</span> <span class='rubyid_Accession constant id'>Accession</span> <span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_klass identifier id'>klass</span><span class='bitor op'>|</span>
    <span class='rubyid_klass identifier id'>klass</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:filter</span><span class='comma token'>,</span> <span class='symbol val'>:repo_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_id identifier id'>id</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_destroy identifier id'>destroy</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_super super kw'>super</span>

  <span class='rubyid_Notifications constant id'>Notifications</span><span class='dot token'>.</span><span class='rubyid_notify identifier id'>notify</span><span class='lparen token'>(</span><span class='string val'>&quot;REPOSITORY_CHANGED&quot;</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="display_string-instance_method">
  
    #<strong>display_string</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 172</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_display_string identifier id'>display_string</span>
  <span class='dstring node'>&quot;#{name} (#{repo_code})&quot;</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reindex_classification_records-instance_method">
  
    #<strong>reindex_classification_records</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


200
201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 200</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_reindex_classification_records identifier id'>reindex_classification_records</span>
  <span class='rubyid_ClassificationTerm constant id'>ClassificationTerm</span><span class='dot token'>.</span><span class='rubyid_update_mtime_for_repo_id identifier id'>update_mtime_for_repo_id</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_id identifier id'>id</span><span class='rparen token'>)</span>
  <span class='rubyid_Classification constant id'>Classification</span><span class='dot token'>.</span><span class='rubyid_update_mtime_for_repo_id identifier id'>update_mtime_for_repo_id</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_id identifier id'>id</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reindex_repository_records-instance_method">
  
    #<strong>reindex_repository_records</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192
193
194
195
196
197
198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 192</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_reindex_repository_records identifier id'>reindex_repository_records</span>
  <span class='rubyid_ASModel constant id'>ASModel</span><span class='dot token'>.</span><span class='rubyid_all_models identifier id'>all_models</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_model identifier id'>model</span><span class='bitor op'>|</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_model identifier id'>model</span><span class='dot token'>.</span><span class='rubyid_model_scope identifier id'>model_scope</span><span class='lparen token'>(</span><span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span> <span class='eq op'>==</span> <span class='symbol val'>:repository</span> <span class='andop op'>&amp;&amp;</span> <span class='rubyid_model identifier id'>model</span><span class='dot token'>.</span><span class='rubyid_publishable? fid id'>publishable?</span>
      <span class='rubyid_model identifier id'>model</span><span class='dot token'>.</span><span class='rubyid_update_mtime_for_repo_id identifier id'>update_mtime_for_repo_id</span><span class='lparen token'>(</span><span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_id identifier id'>id</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_from_json-instance_method">
  
    #<strong>update_from_json</strong>(json, opts = {}, apply_nested_records = true)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179
180
181
182
183
184
185
186
187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 177</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_update_from_json identifier id'>update_from_json</span><span class='lparen token'>(</span><span class='rubyid_json identifier id'>json</span><span class='comma token'>,</span> <span class='rubyid_opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='rubyid_apply_nested_records identifier id'>apply_nested_records</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
  <span class='rubyid_reindex_required identifier id'>reindex_required</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_publish identifier id'>publish</span> <span class='neq op'>!=</span> <span class='lparen token'>(</span><span class='rubyid_json identifier id'>json</span><span class='lbrack token'>[</span><span class='string val'>&#39;publish&#39;</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='integer val'>1</span> <span class='colon op'>:</span> <span class='integer val'>0</span><span class='rparen token'>)</span>
  <span class='rubyid_classification_reindex_required identifier id'>classification_reindex_required</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_name identifier id'>name</span> <span class='neq op'>!=</span> <span class='rubyid_json identifier id'>json</span><span class='lbrack token'>[</span><span class='string val'>&#39;name&#39;</span><span class='rbrack token'>]</span>

  <span class='rubyid_result identifier id'>result</span> <span class='assign token'>=</span> <span class='rubyid_super super kw'>super</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_reindex_required identifier id'>reindex_required</span>
    <span class='rubyid_reindex_repository_records identifier id'>reindex_repository_records</span>
  <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_classification_reindex_required identifier id'>classification_reindex_required</span>
    <span class='rubyid_reindex_classification_records identifier id'>reindex_classification_records</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_result identifier id'>result</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_position_only-instance_method">
  
    #<strong>update_position_only</strong>(target_position)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


205
206
207
208
209
210
211
212
213
214</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 205</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_update_position_only identifier id'>update_position_only</span><span class='lparen token'>(</span><span class='rubyid_target_position identifier id'>target_position</span> <span class='rparen token'>)</span>
  <span class='rubyid_current_position identifier id'>current_position</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_position identifier id'>position</span>
  <span class='rubyid_sibling identifier id'>sibling</span> <span class='assign token'>=</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_dataset identifier id'>dataset</span><span class='dot token'>.</span><span class='rubyid_filter identifier id'>filter</span><span class='lparen token'>(</span> <span class='label val'>position:</span> <span class='rubyid_target_position identifier id'>target_position</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_first identifier id'>first</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_sibling identifier id'>sibling</span>
    <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_dataset identifier id'>dataset</span><span class='dot token'>.</span><span class='rubyid_filter identifier id'>filter</span><span class='lparen token'>(</span> <span class='label val'>position:</span> <span class='rubyid_target_position identifier id'>target_position</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_update identifier id'>update</span><span class='lparen token'>(</span> <span class='label val'>position:</span> <span class='rubyid_Sequel constant id'>Sequel</span><span class='dot token'>.</span><span class='rubyid_lit identifier id'>lit</span><span class='lparen token'>(</span><span class='string val'>&#39;position + 9999&#39;</span> <span class='rparen token'>)</span> <span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_dataset identifier id'>dataset</span><span class='dot token'>.</span><span class='rubyid_filter identifier id'>filter</span><span class='lparen token'>(</span> <span class='label val'>id:</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_id identifier id'>id</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_update identifier id'>update</span><span class='lparen token'>(</span> <span class='label val'>position:</span> <span class='rubyid_target_position identifier id'>target_position</span><span class='comma token'>,</span> <span class='label val'>system_mtime:</span> <span class='rubyid_Time constant id'>Time</span><span class='dot token'>.</span><span class='rubyid_now identifier id'>now</span> <span class='rparen token'>)</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_class identifier id'>class</span><span class='dot token'>.</span><span class='rubyid_dataset identifier id'>dataset</span><span class='dot token'>.</span><span class='rubyid_filter identifier id'>filter</span><span class='lparen token'>(</span> <span class='label val'>id:</span> <span class='rubyid_sibling identifier id'>sibling</span><span class='dot token'>.</span><span class='rubyid_id identifier id'>id</span> <span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_update identifier id'>update</span><span class='lparen token'>(</span> <span class='label val'>position:</span> <span class='rubyid_current_position identifier id'>current_position</span><span class='comma token'>,</span> <span class='label val'>system_mtime:</span> <span class='rubyid_Time constant id'>Time</span><span class='dot token'>.</span><span class='rubyid_now identifier id'>now</span> <span class='rparen token'>)</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_sibling identifier id'>sibling</span>
  <span class='rubyid_target_position identifier id'>target_position</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validate-instance_method">
  
    #<strong>validate</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


22
23
24
25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'backend/app/model/repository.rb', line 22</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_validate identifier id'>validate</span>
  <span class='rubyid_super super kw'>super</span>
  <span class='rubyid_validates_unique identifier id'>validates_unique</span><span class='lparen token'>(</span><span class='symbol val'>:repo_code</span><span class='comma token'>,</span> <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;short name already in use&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_validates_presence identifier id'>validates_presence</span><span class='lparen token'>(</span><span class='symbol val'>:repo_code</span><span class='comma token'>,</span> <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;You must supply a short name for your repository&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_validates_presence identifier id'>validates_presence</span><span class='lparen token'>(</span><span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:message</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;You must give your repository a name&quot;</span><span class='rparen token'>)</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  ArchivesSpace Version release-v4.0.x Documentation Generated on Wed Jun 25 21:11:46 2025 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.36.
</div>

    </div>
  </body>
</html>