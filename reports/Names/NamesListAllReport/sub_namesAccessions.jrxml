<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sub_namesAccessions" pageWidth="612" pageHeight="792" columnWidth="582" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="972e11a9-0874-43e3-9aa7-44c132b8e355">
	<property name="ireport.scriptlethandling" value="0"/>
	<property name="ireport.encoding" value="UTF-8"/>
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<import value="net.sf.jasperreports.engine.*"/>
	<import value="java.util.*"/>
	<import value="net.sf.jasperreports.engine.data.*"/>
	<parameter name="nameType" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["Person"]]></defaultValueExpression>
	</parameter>
	<parameter name="agentId" class="java.lang.Integer" isForPrompting="false">
		<defaultValueExpression><![CDATA[11]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
     T1.`id` AS rlshp_id,
     T1.`accession_id` AS rlshp_accession_id,
     T2.`identifier` AS identifier,
     T2.`title` AS title,
     T2.`accession_date` AS date,
     GetAccessionDateExpression(T1.`accession_id`) AS dateExpression
FROM
     `linked_agents_rlshp` T1
INNER JOIN
     accession T2 ON T2.`id` = T1.`accession_id`
WHERE
     T1.`accession_id` IS NOT NULL
AND
     GetAgentMatch($P{nameType}, $P{agentId}, T1.`agent_person_id`,
     T1.`agent_family_id`, T1.`agent_corporate_entity_id`,
     T1.`agent_software_id`) = 1
GROUP BY
     T1.`accession_id`]]>
	</queryString>
	<field name="rlshp_id" class="java.lang.Integer"/>
	<field name="rlshp_accession_id" class="java.lang.Integer"/>
	<field name="identifier" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="title" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="date" class="java.sql.Date"/>
	<field name="dateExpression" class="java.lang.String"/>
	<variable name="TEST_ACCESSIONS" class="java.lang.Integer" resetType="None" calculation="Sum">
		<variableExpression><![CDATA[]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="36" splitType="Stretch">
			<staticText>
				<reportElement key="staticText-9" positionType="Float" mode="Opaque" x="133" y="19" width="157" height="15" forecolor="#000000" backcolor="#FFFFFF" uuid="381fd388-3249-4662-8116-9f0dcc5b5850"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
					<font fontName="Arial" size="10" isBold="false" isItalic="false" isUnderline="true" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Title:]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-8" positionType="Float" mode="Opaque" x="0" y="4" width="61" height="15" forecolor="#000000" backcolor="#FFFFFF" uuid="8c07f291-9a2b-4529-b4e5-0008009a406b"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
					<font fontName="Arial" size="10" isBold="true" isItalic="false" isUnderline="true" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Accession:]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-10" positionType="Float" mode="Opaque" x="355" y="19" width="75" height="15" forecolor="#000000" backcolor="#FFFFFF" uuid="a1517037-5fa7-4b89-b6c8-255f0c1b7aaf"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
					<font fontName="Arial" size="10" isBold="false" isItalic="false" isUnderline="true" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Dates:]]></text>
			</staticText>
			<staticText>
				<reportElement key="staticText-8" positionType="Float" mode="Opaque" x="5" y="19" width="56" height="15" forecolor="#000000" backcolor="#FFFFFF" uuid="22b2a81f-a5b9-4277-96a3-61dc45f781a5"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
					<font fontName="Arial" size="10" isBold="false" isItalic="false" isUnderline="true" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<text><![CDATA[Number:]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="22" splitType="Stretch">
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField" positionType="Float" mode="Opaque" x="133" y="2" width="208" height="15" isPrintWhenDetailOverflows="true" forecolor="#000000" backcolor="#FFFFFF" uuid="ed475f86-76ab-458a-914a-a2988ef8154a"/>
				<box leftPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
					<font fontName="Arial" size="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{title}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement key="textField" mode="Opaque" x="355" y="2" width="144" height="15" forecolor="#000000" backcolor="#FFFFFF" uuid="b54c5fd2-dd9d-42da-9415-70bd0361170e"/>
				<box leftPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
					<font fontName="Arial" size="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dateExpression}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="" isBlankWhenNull="true">
				<reportElement key="textField-5" mode="Opaque" x="5" y="2" width="117" height="15" forecolor="#000000" backcolor="#FFFFFF" uuid="d7a8174a-15e5-46dc-afc7-b4558ff8a43d"/>
				<box topPadding="1" leftPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Top" rotation="None">
					<font fontName="Arial" size="10" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{identifier}.replace("[", "").
replace("]","").
replace("\"","").
replace(",null", "").
replace(",", ".")]]></textFieldExpression>
			</textField>
			<line>
				<reportElement key="line-1" positionType="Float" mode="Opaque" x="0" y="19" width="499" height="1" forecolor="#999999" backcolor="#FFFFFF" uuid="0766430f-3663-4641-9c4f-49d62c2e7b60"/>
				<graphicElement fill="Solid">
					<pen lineWidth="0.25" lineStyle="Solid"/>
				</graphicElement>
			</line>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
