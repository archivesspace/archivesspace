<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Running ArchivesSpace against MySQL - ArchivesSpace</title>
    <link rel="stylesheet" href="/assets/stylesheets/main.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" defer></script>
    <script src="/assets/javascripts/site.js" type="text/javascript" charset="utf-8" defer></script>
    <script src="/assets/javascripts/main.js" type="text/javascript" charset="utf-8" defer></script>
    <link rel="alternate" type="application/atom+xml" href="/blog.xml">
  </head>
  <body>
    <div class="wrapper">

      <header class="top">
  <div class="row topbar">
    <h1 id="logo" class="logo">
  <a href="http://archivesspace.org/" title="ArchivesSpace">ArchivesSpace</a>
</h1>

    <nav>
      <ul id="navigation" class="navigation">
        <li><a href="https://archivesspace.atlassian.net/wiki/display/ADC/ArchivesSpace">Wiki</a></li>
        <li><a href="http://docs.archivesspace.org">User Docs</a></li>
        <li class="toggle"><button type="button" id="toggle-menu" class="button--teal">Menu</button></li>
      </ul>
    </nav>
  </div>
</header>


      <div id="content" class="row">

        <div id="sidebar" class="sidebar">
  <div>
    <!-- <h2>Search</h2> -->
    <div class="searchbox">
      <form>
        <input type="text" id="st-search-input" class="searchbox-input" placeholder="Search the docs" />
      </form>
      <script type="text/javascript">
          (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
            (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
            e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
            })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

              _st('install','R97A3uv-TMx4aozWwT1Y','2.0.0');
            </script>
    
    </div>
  </div>
  <!-- <section>
    <h2>Newsletter</h2>
    <div id="mc_embed_signup" style="margin-left: 1.5em; margin-top: 0.5em;">
      <form
         action="http://travis-ci.us7.list-manage.com/subscribe/post?u=8ce724a4c9af4dace663cd39c&amp;id=44f8dff14c"
         method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate"
         target="_blank" novalidate>
        <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required/>
        <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
      </form>
    </div>
  </section>
  <section>
    <h2><a href="http://travis-ci.com/?utm_source=docs.travis-ci.org&utm_medium=referral&utm_content=textlink&utm_campaign=docsite_sidebar">Travis CI for Private Repositories</a></h2>
  </section> -->

  <section>
    <h2>Menu</h2>
    <nav>
      <ul>
        <li><a href="/user/system-requirements/">System Requirements</a></li>
        <li><a href="/user/getting-started/">Getting started</a></li>
        <li><a href="/user/configuring-archivesspace/">Configuring ArchivesSpace</a></li>
        <li><a href="/user/upgrading-to-a-new-release-of-archivesspace/">Upgrading ArchivesSpace</a></li>
        <li><a href="/user/running-archivesspace-as-a-unix-daemon/">Running ArchivesSpace as a Unix daemon</a></li>
        <li><a href="/user/running-archivesspace-as-a-windows-service/">Running ArchivesSpace as a Windows Service</a></li>
        <li><a href="/user/running-archivesspace-under-tomcat/">Running ArchivesSpace under Tomcat</a></li>
        <li><a href="/user/running-archivesspace-against-mysql/">Setting up MySQL for Production</a></li>
        <li><a href="/user/backup-and-recovery/">Backup and Recovery</a></li>
        <li><a href="/user/re-creating-indexes/">Re-creating your indexes</a></li>
        <li><a href="/user/resetting-passwords/">Resetting Passwords</a></li>
        <li><a href="/user/configuring-ldap-authentication/">Configuring LDAP authentication</a></li>
        <li><a href="/user/archivesspace-plug-ins-readme/">Plugins and Local Customizations</a></li>
        <li><a href="/user/running-archivesspace-under-a-prefix/">Deploying under a URL prefix</a></li>
        <li><a href="/user/running-archivesspace-with-external-solr/">Using an external Solr index</a></li>
        <li><a href="/user/application-monitoring-with-new-relic/">Monitoring with New Relic</a></li>
      </ul>
      <h2>Developer Guides</h2>
      <ul>
        <li><a href="/user/archivesspace-architecture-overview">Architecture Overview</a></li>
        <li><a href="/api">The API</a></li>
        <li><a href="/user/archivesspace-build-system">Building ArchivesSpace</a></li>
        <li><a href="/user/selenium-test-suite">Running Selenium Tests</a></li>
        <li><a href="/doc">Ruby YARD Documentation</a></li>
        <li><div class="status-circle status">Status:</div>
          <a href="https://travis-ci.org/archivesspace/archivesspace">Travis CI Status</a>
        </li>
      </ul>
    </nav>
  </section>
  <section>
    <h2>Contact</h2>
    <ul>
      <li><a href="https://twitter.com/archivesspace">Twitter</a></li>
      <li><a href="irc://chat.freenode.net/%23archivesspace">IRC</a></li>
      <li><a href="http://github.com/archivesspace">GitHub</a></li>
    </ul>
  </section>
  <section>
    <h2>Contributing</h2>
    <p>This documentation site is open source.
      The <a href="https://github.com/archivesspace/archivesspace/tree/gh-pages">README in our Git repository</a> explains how to contribute.</p>
      <p>This documentation was based on the <a href="https://travis-ci.org">Travis CI</a> documentation. It uses <a href="https://github.com/jekyll/jekyll">Jekyll</a> and <a href="https://github.com/tripit/slate">Slate</a></p>
  </section>
</div><!-- /#sidebar -->


        <main id="main" class="main">
          
            <h1 class="title">Running ArchivesSpace against MySQL</h2>
          
          <p>Out of the box, the ArchivesSpace distribution runs against an
embedded database, but this is only suitable for demonstration
purposes.  When you are ready to starting using ArchivesSpace with
real users and data, you should switch to using MySQL.  MySQL offers
significantly better performance when multiple people are using the
system, and will ensure that your data is kept safe.</p>

<h2 id="download-mysql-connector">Download MySQL Connector</h2>

<p>ArchivesSpace requires the
<a href="http://dev.mysql.com/downloads/connector/j/">MySQL Connector for Java</a>,
which must be downloaded separately because of its licensing agreement.
Download the Connector and place it in a location where ArchivesSpace can
find it on its classpath:</p>

<pre><code>     $ cd lib
     $ curl -Oq http://central.maven.org/maven2/mysql/mysql-connector-java/5.1.34/mysql-connector-java-5.1.34.jar 
</code></pre>

<p>Note that the version of the MySQL connector may be different by the
time you read this.</p>

<h2 id="set-up-your-mysql-database">Set up your MySQL database</h2>

<p>Next, create an empty database in MySQL and grant access to a dedicated
ArchivesSpace user. The following example uses username <code>as</code>
and password <code>as123</code>.</p>

<p><strong>NOTE: WHEN CREATING THE DATABASE, YOU MUST SET THE DEFAULT CHARACTER
ENCODING FOR THE DATABASE TO BE <code>utf8</code>.</strong> This is particularly important
if you use a MySQL client to create the database (e.g. Navicat, MySQL
Workbench, phpMyAdmin, etc.).</p>

<pre><code>     $ mysql -uroot -p

     mysql&gt; create database archivesspace default character set utf8;
     Query OK, 1 row affected (0.08 sec)

     mysql&gt; grant all on archivesspace.* to 'as'@'localhost' identified by 'as123';
     Query OK, 0 rows affected (0.21 sec)
</code></pre>

<p>Then, modify your <code>config/config.rb</code> file to refer to your MySQL
database. When you modify your configuration file, <strong>MAKE SURE THAT YOU
SPECIFY THAT THE CHARACTER ENCODING FOR THE DATABASE TO BE <code>UTF-8</code></strong> as shown
below:</p>

<pre><code> AppConfig[:db_url] = "jdbc:mysql://localhost:3306/archivesspace?user=as&amp;password=as123&amp;useUnicode=true&amp;characterEncoding=UTF-8"
</code></pre>

<p>There is a database setup script that will create all the tables that
ArchivesSpace requires.  Run this with:</p>

<pre><code>scripts/setup-database.sh  # or setup-database.bat under Windows
</code></pre>

<h2 id="start-archivesspace">Start ArchivesSpace</h2>

<p>Once your database is configured, start the application using
<code>archivesspace.sh</code> (or <code>archivesspace.bat</code> under Windows).</p>

<p>Confirm that ArchivesSpace is running correctly by accessing the
following URLs in your browser:</p>

<ul>
  <li>http://localhost:8089/ – the backend</li>
  <li>http://localhost:8080/ – the staff interface</li>
  <li>http://localhost:8081/ – the public interface</li>
  <li>http://localhost:8090/ – the Solr admin console</li>
</ul>


        </main>
      </div><!-- /#content -->

      <footer>
  <div class="row">
  </div>
</footer>

    </div><!-- /.wrapper -->
  </body>
</html>
