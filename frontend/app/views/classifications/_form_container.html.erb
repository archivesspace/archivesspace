<%= link_to_help :topic => "classification" %>

<h2>
   <%= @form_title ? @form_title : @classification.title.blank? ? "#{I18n.t("actions.new_prefix")} #{I18n.t("classification._singular")}" : @classification.title %>  <span class="label label-info"><%= I18n.t("classification._singular") %></span>
</h2>

<%= render_aspace_partial :partial => "shared/form_messages", :locals => {:form => form} %>

<%= hidden_field_tag "id", @classification.id %>
<%= hidden_field_tag "uri", @classification.uri %>

<fieldset>
  <% define_template("classification", jsonmodel_definition(:classification)) do |form| %>
    <section id="basic_information">
      <h3><%= I18n.t("classification._frontend.section.basic_information") %></h3>

      <%= form.label_and_textfield "identifier" %>
      <%= form.label_and_textfield "title" %>

      <% if AppConfig[:slugs] == :show %>
        <%= form.slug_url_field "slug", session[:repo_slug], AppConfig[:repo_name_in_slugs] %>
        <%= form.label_and_textfield "slug", :field_opts => {:disabled => @classification.is_slug_auto } %>
        <%= form.label_and_boolean "is_slug_auto", {}, form.default_for("is_slug_auto") %>
      <% end %>

      <%= form.label_and_textarea "description" %>

      <% form.push("creator", form["creator"] || {}) do %>
        <%= render_aspace_partial :partial => "agents/linker", :locals => {:form => form, :linker_label => I18n.t("classification.creator"), :optional => true, :multiplicity => "one"} %>
      <% end %>

      <%= render_aspace_partial :partial => "shared/subrecord_form", :locals => {:form => form, :name => "linked_records"} %>

    </section>
  <% end %>

  <% form.emit_template("classification") %>

</fieldset>
<%= javascript_tag do %>
  activate_slug_checkbox();
<% end %>
