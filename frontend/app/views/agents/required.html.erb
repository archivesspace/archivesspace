<%= setup_context :object => @agent, :controller => :agents,  :agent_type => @agent.agent_type, :title => "#{t("actions.required")} #{t("agent.agent_type.#{@agent.agent_type}")}" %>

<%= form_for @agent, :as => "agent", :url => {:action => :update_required}, :html => {:class => 'form-horizontal aspace-record-form', :id => "agent_form"} do |f| %>
  <%= form_context :agent, @agent do |form| %>
    <div class="d-flex">
      <div class="col-md-3">
        <%= render_aspace_partial :partial => "required_sidebar", :locals => {:form => form} %>
      </div>
      <div class="col-md-9">
        <%= render_aspace_partial :partial => "shared/toolbar_new_records" %>
        <div class="record-pane">
          <%= link_to_help :topic => "agent_required" %>
          <h2><%= "#{t("required_fields.form_title.#{@agent.agent_type}")}" %>  <span class="label label-info badge"><%= t("agent._singular") %></span></h2>
          <%= render_aspace_partial :partial => "agents/form_required", :locals => {:form => form} %>
          <div class="form-actions">
            <div class="btn-group">
              <button type="submit" class="btn btn-primary"><%= t("#{@agent.agent_type}._frontend.action.save") %></button>
              <button type="submit" id="createPlusOne" name="plus_one" class="btn btn-primary createPlusOneBtn"><%= t("actions.save_plus_one") %></button>
            </div>
            <%= link_to t("actions.cancel"), :back, :class => "btn btn-cancel btn-default" %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
