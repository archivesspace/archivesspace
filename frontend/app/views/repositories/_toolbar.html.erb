<div class="row">
  <div class="col-md-12">
    <div class="record-toolbar d-flex align-items-center">
      <%  if user_can?('create_repository') %>
        <%  if !['edit', 'update'].include?(controller.action_name) %>
          <div class="btn-group">
            <%= link_to t("actions.edit"), {:controller => :repositories, :action => :edit, :id => @repository.id}, :class => "btn btn-sm btn-primary" %>
          </div>
        <% end %>
        <% if ['new', 'create', 'edit', 'update'].include?(controller.action_name) %>
          <div class="save-changes">
            <button type="submit" class="btn btn-primary btn-sm"><%= t("actions.save_prefix") %></button>
          </div>
        <% end %>
        <% if ['edit', 'update'].include?(controller.action_name) %>
          <div class="close-record">
            <%= link_to t("actions.finish_editing"), {:controller => :repositories, :action => :show, :id => @repository.id}, :class => "btn btn-primary btn-sm btn-success finish-editing" %>
          </div>
          <div class="align-items-center revert-changes">
            <%= link_to t("actions.revert"), {:controller => :repositories, :action => :edit, :id => @repository.id}, :class => "btn btn-sm btn-default" %>
          </div>
        <% end %>
      <% end %>
      <div class="btn-toolbar ml-auto">
        <% if session[:repo_id] != @repository.id and @repositories.any?{|r| r['uri'] === @repository.uri} %>
          <%= form_for @repository, :as => "repository", :url => {:action => :select}, :html => {:style => "display: inline;"} do |f| %>
            <button type="submit" class="btn btn-sm btn-success"><%= t("repository._frontend.action.select") %></button>
          <% end %>
        <% end %>
        <% if user_can?('delete_repository') && @repository.id != session[:repo_id] && controller.action_name == 'edit'   %>
          <div class="btn-group">
            <div class="btn btn-inline-form">
              <%= button_delete_action url_for(:controller => :repositories, :action => :delete, :id => @repository.id), 
                {   :class => "btn btn-sm btn-danger delete-record delete-repository", 
                    :"data-confirm-btn-class" => "btn-danger repo-delete", 
                    :"data-title" => t("actions.delete_repository_confirm_title", :name => @repository["repository"]["name"]),
                    :"data-message" => t("actions.delete_repository_confirm_message", :repository => @repository["repository"]["repo_code"].gsub("'", "").gsub('"', '') ) } %>
            </div>
          </div>
        <% end %>
      </div>
    </div><!-- record-toolbar -->

    <% if ['edit', 'update'].include?(controller.action_name) %>
      <div id="record-toolbar-alert">
        <p class="mb-0 pt-1 pb-2 px-2 fs-12px"><%= t("actions.toolbar_disabled_message") %></p>
      </div>
    <% end %>
  </div>
</div>
