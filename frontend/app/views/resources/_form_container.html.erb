<h2>
   <%= @resource.title.blank? ? "#{I18n.t("actions.new_prefix")} #{I18n.t("resource._html.singular")}" : @resource.title %>  <span class="label label-info"><%= I18n.t("resource._html.singular") %></span>
</h2>

<%= render :partial => "shared/form_messages", :locals => {:form => form} %>

<%= form.hidden_input "related_accession" %>
<%= hidden_field_tag "id", @resource.id %>

<fieldset>

  <% define_template("resource", jsonmodel_definition(:resource)) do |form| %>

    <section id="basic_information">
      <h3><%= I18n.t("resource._html.section.basic_information") %></h3>

      <%= form.label_and_textfield "title" %>
      <%= form.label_and_fourpartid %>
      <%= form.label_and_select "level", form.possible_options_for("level", true) %>
      <%= form.label_and_textfield "other_level" %>
      <%= form.label_and_select "resource_type", form.possible_options_for("resource_type", true) %>
      <%= form.label_and_select "language", form.possible_options_for("language", true) %>
      <%= form.label_and_textarea "container_summary" %>
      <%= form.label_and_boolean "publish", {}, form.default_for("publish") %>
      <%= form.label_and_boolean "restrictions", {}, form.default_for("restrictions") %>
      <%= form.label_and_textarea "repository_processing_note" %>
    </section>
    
    <%= render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "dates"} %>
    <%= render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "extents"} %>

    <section id="finding_aid" class="subrecord-form-dummy">
      <h3><%= I18n.t("resource._html.section.finding_aid") %></h3>
      <div class="subrecord-form-container">
        <div class="subrecord-form-fields">
          <%= form.label_and_textfield "ead_id" %>
          <%= form.label_and_textfield "ead_location" %>
          <hr/>
          <%= form.label_and_textfield "finding_aid_title" %>
          <%= form.label_and_textfield "finding_aid_filing_title" %>
          <%= form.label_and_textfield "finding_aid_date" %>
          <%= form.label_and_textfield "finding_aid_author" %>
          <%= form.label_and_select "finding_aid_description_rules", form.possible_options_for("finding_aid_description_rules", true) %>
          <%= form.label_and_textfield "finding_aid_language" %>
          <%= form.label_and_textfield "finding_aid_sponsor" %>
          <%= form.label_and_textarea "finding_aid_edition_statement" %>
          <%= form.label_and_textarea "finding_aid_series_statement" %>
          <%= form.label_and_textfield "finding_aid_revision_date" %>
          <%= form.label_and_textarea "finding_aid_revision_description" %>
          <%= form.label_and_select "finding_aid_status", form.possible_options_for("finding_aid_status", true) %>
          <%= form.label_and_textarea "finding_aid_note" %>
        </div>
      </div>
    </section>

  <% end %>

  <% form.emit_template("resource") %>

  <%= render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "related_accessions", :template => "resource_related_accessions"} %>
  <%= render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "linked_agents", :template => "resource_linked_agent"} %>
  <%= render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "subjects", :template => "subrecord_subject"} %>
  <%# render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "notes", :template => "note_form_selector", :section_id => "notes"} %>
  <%= render :partial => "notes/form", :locals => {:form => form} %>
  <%= render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "external_documents"} %>
  <%= render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "rights_statements"} %>
  <%= render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "instances", :custom_action_template => "instances/subrecord_form_action"} %>
  <%= render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "deaccessions"} %>
  <%= render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "collection_management", :cardinality => :zero_to_one} %>
  <%= render :partial => "shared/subrecord_form", :locals => {:form => form, :name => "user_defined", :cardinality => :zero_to_one} %>

</fieldset>
