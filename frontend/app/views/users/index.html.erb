<%= setup_context :title => @manage_access ? I18n.t("user._html.section.manage_access") : I18n.t("user._html.plural") %>

<div class="row-fluid">
   <div class="span3"></div>
   <div class="span9">
    <div class="record-pane">

      <% if not @manage_access %>
        <div class="btn-group pull-right">
          <%= link_to "#{I18n.t("actions.create")} #{I18n.t("user._html.singular")}", {:controller => :users, :action => :new}, :class => "btn" %>
        </div>
      <% end %>

      <h2><%= @manage_access ? I18n.t("user._html.section.manage_access") : I18n.t("user._html.plural") %></h2>

      <% if flash[:success] %>
        <div class="alert alert-success">
          <pre><%= flash[:success] %></pre>
        </div>
      <% end %>

     <% if @search_data['results'].length %>
       <table class="table table-striped table-bordered table-condensed">
         <thead>
           <tr>
             <th><%= I18n.t("user._html.singular") %></th>
             <th width="70px"><!-- actions --></th>
           </tr>
         </thead>
         <tbody>
          <% @search_data['results'].each do |user| %>
             <tr>
              <td><%= user.username %></td>
              <td>
                 <div class="btn-group" style="float: right">
                   <% if @manage_access %>
                    <%= link_to I18n.t("actions.edit_groups"), {:controller => :users, :action => :edit_groups, :id => user.id}, :class => "btn btn-mini" %>
                   <% else %>
                    <%= link_to I18n.t("actions.edit"), {:controller => :users, :action => :edit, :id => user.id}, :class => "btn btn-mini" %>
                   <% end %>
                 </div>
              </td>
            </tr>
          <% end %>
         </tbody>
       </table>
       <%= render :partial => "shared/pagination" %>
      <% else %>
         <p class="alert alert-info">
            No Users.
         </p>
      <% end %>
     </div>
   </div>
</div>
