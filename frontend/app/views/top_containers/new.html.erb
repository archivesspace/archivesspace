<%= setup_context(:object => @top_container, :controller => :top_containers, :type => :top_container) %>

<%= form_for @top_container, :as => "top_container", :url => {:controller => :top_containers, :action => :create}, :html => {:class => 'form-horizontal aspace-record-form', :id => "new_top_container_form"} do |f| %>
  <%= form_context :top_container, @top_container do |form| %>
    <div class="row">
      <div class="col-md-3">
        <%= render_aspace_partial :partial => "sidebar" %>
      </div>
      <div class="col-md-9">
        <%= render_aspace_partial :partial => "shared/toolbar_new_records" %>
        <div class="record-pane">
          <%= link_to_help :topic => "top_container" %>
          <h2><%= t("actions.new_prefix") %> <%= t("top_container._singular") %> <span class="label label-info badge"><%= t("top_container._singular") %></span></h2>

          <%= render_aspace_partial :partial => "form", :locals => {:form => form} %>

          <div class="form-actions pl-0">
            <button type="submit" class="btn btn-primary"><%= t("top_container._frontend.action.save") %></button>
            <%= link_to t("actions.cancel"), :back, :class => "btn btn-cancel btn-default" %>
          </div>

        </div>
      </div>
    </div>
  <% end %>
<% end %>

<%= javascript_include_tag("form.js") %>
<script>
  $(function() {
        $(".linker:not(.initialised)", $("#new_top_container")).linker();

  });
</script>
<%= javascript_include_tag("subrecord.crud") %>
<%= javascript_include_tag("form") %>
<script>
  $(function() {
      $(document).trigger("loadedrecordsubforms.aspace", [$("#new_top_container_form")]);
  });
</script>
